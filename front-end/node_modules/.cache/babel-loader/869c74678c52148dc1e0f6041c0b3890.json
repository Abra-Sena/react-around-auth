{"ast":null,"code":"import _toConsumableArray from\"/Users/emiline/Desktop/dev/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/emiline/Desktop/dev/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import PopupWithForm from'./PopupWithForm';import AddPlacePopup from'./AddNewCardPopup';import EditAvatarPopup from\"./EditAvatarPopup\";import EditProfilePopup from\"./EditProfilePopup\";import ImagePopup from'./ImagePopup';import api from\"../utils/api\";import{CurrentUserContext}from'../contexts/CurrentUserContext';function App(){// current user context\nvar _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),currentUser=_React$useState2[0],setCurrentUser=_React$useState2[1];//popupus\nvar _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddNewCard=_React$useState4[0],setAddNewCardPopup=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatar=_React$useState6[0],setEditAvatarPopup=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isEditProfile=_React$useState8[0],setEditProfilePopup=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isDeleteCard=_React$useState10[0],setDeleteCardPopup=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isImageExpand=_React$useState12[0],setImageExpand=_React$useState12[1];var _React$useState13=React.useState({name:\"Yosemite\",link:\"https://code.s3.yandex.net/web-code/yosemite.jpg\"}),_React$useState14=_slicedToArray(_React$useState13,2),selectedCard=_React$useState14[0],setSelectedCard=_React$useState14[1];var _React$useState15=React.useState([]),_React$useState16=_slicedToArray(_React$useState15,2),cards=_React$useState16[0],setCards=_React$useState16[1];//handle click on buttons\nfunction handleEditAvatarBtn(){setEditAvatarPopup(true);}function handleEditProfileBtn(){setEditProfilePopup(true);}function handleAddCardBtn(){setAddNewCardPopup(true);}// function handleDeleteBtn(card) { // not needed yet\n//   setDeleteCardPopup(true);\n// }\nfunction _handleCardClick(card){setSelectedCard(card);setImageExpand(true);}function _handleCardLike(card){// Check one more time if this card was already liked\nvar isLiked=card.likes.some(function(i){return i._id===currentUser._id;});var res=isLiked?api.removeCardLike(card.id):api.addCardLike(card.id);res.then(function(newCard){// Create a new array based on the existing one and putting a new card into it\nvar newCards=cards.map(function(c){return c.id===card.id?transformCard(newCard):c;});// Update the state\nsetCards(newCards);}).catch(function(err){return console.log(err);});}function closeAllPopups(){setEditAvatarPopup(false);setEditProfilePopup(false);setAddNewCardPopup(false);setDeleteCardPopup(false);setImageExpand(false);}// to be handled later\n// function handleEscClose(evt) {\n//   if(evt.key === 'Escape') {\n//     closeAllPopups();\n//   }\n// }\nfunction handlePopupClose(evt){if(evt.target!==evt.currentTarget)return;closeAllPopups();}function _handleCardDelete(card){api.removeCard(card.id).then(function(){var cardsCopy=cards.filter(function(item){return item.id!==card.id;});setCards(cardsCopy);}).catch(function(err){return console.log(err);});}function handleEditAvatar(avatar){api.setUserAvatar({avatar:avatar}).then(function(res){setCurrentUser(res);}).then(function(){return setEditAvatarPopup(false);}).catch(function(err){return console.log(err);});}function handleEditProfile(_ref){var name=_ref.name,about=_ref.about;api.setUserInfos({name:name,about:about}).then(function(user){setCurrentUser(user);}).then(function(){return setEditProfilePopup(false);}).catch(function(err){return console.log(err);});}function transformCard(cardItem){return{alt:cardItem.name,title:cardItem.name,src:cardItem.link,id:cardItem._id,owner:cardItem.owner,likes:cardItem.likes};}function handleAddNewCard(_ref2){var name=_ref2.name,link=_ref2.link;api.addCard({name:name,link:link}).then(function(newCard){return setCards([transformCard(newCard)].concat(_toConsumableArray(cards)));}).then(function(){return setAddNewCardPopup(false);}).catch(function(err){return console.log(err);});}React.useEffect(function(){api.getUserInfo().then(function(res){setCurrentUser(res);}).catch(function(err){return console.log(err);});api.getInitialCards().then(function(initialCards){setCards(initialCards.map(transformCard));}).catch(function(err){return console.log(err);});},[]);return/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main// send these state variables and their associated functions to main\n,{cards:cards// popups button click\n,handleEditAvatarBtn:handleEditAvatarBtn,handleEditProfileBtn:handleEditProfileBtn,handleAddCardBtn:handleAddCardBtn// other buttons\n,handleCardLike:function handleCardLike(card){return _handleCardLike(card);},handleCardDelete:function handleCardDelete(card){return _handleCardDelete(card);}// functionnalities\n,handleCardClick:function handleCardClick(card){return _handleCardClick(card);},onCardClick:function onCardClick(card){return _handleCardClick(card);},onDeleteClick:function onDeleteClick(card){return _handleCardDelete(card);},onLickeClick:function onLickeClick(card){return _handleCardLike(card);}}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatar,onClose:handlePopupClose,onUpdateAvatar:handleEditAvatar}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfile,onClose:handlePopupClose,onProfileUpdate:handleEditProfile}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddNewCard,onClose:handlePopupClose,handleAddNewCard:handleAddNewCard}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"delete\",title:\"Are You Sure?\",submitButton:\"Yes\",isOpen:isDeleteCard,onClose:handlePopupClose,onSubmit:_handleCardDelete}),/*#__PURE__*/_jsx(ImagePopup,{src:selectedCard.src,title:selectedCard.title,isOpen:isImageExpand,onClose:handlePopupClose})]});}export default App;","map":{"version":3,"sources":["/Users/emiline/Desktop/dev/around-react/src/components/App.js"],"names":["React","Header","Main","Footer","PopupWithForm","AddPlacePopup","EditAvatarPopup","EditProfilePopup","ImagePopup","api","CurrentUserContext","App","useState","currentUser","setCurrentUser","isAddNewCard","setAddNewCardPopup","isEditAvatar","setEditAvatarPopup","isEditProfile","setEditProfilePopup","isDeleteCard","setDeleteCardPopup","isImageExpand","setImageExpand","name","link","selectedCard","setSelectedCard","cards","setCards","handleEditAvatarBtn","handleEditProfileBtn","handleAddCardBtn","handleCardClick","card","handleCardLike","isLiked","likes","some","i","_id","res","removeCardLike","id","addCardLike","then","newCard","newCards","map","c","transformCard","catch","err","console","log","closeAllPopups","handlePopupClose","evt","target","currentTarget","handleCardDelete","removeCard","cardsCopy","filter","item","handleEditAvatar","avatar","setUserAvatar","handleEditProfile","about","setUserInfos","user","cardItem","alt","title","src","owner","handleAddNewCard","addCard","useEffect","getUserInfo","getInitialCards","initialCards"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport AddPlacePopup from './AddNewCardPopup';\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport ImagePopup from './ImagePopup';\nimport api from \"../utils/api\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n  // current user context\n  const [currentUser, setCurrentUser] = React.useState({});\n  //popupus\n  const [isAddNewCard, setAddNewCardPopup] = React.useState(false);\n  const [isEditAvatar, setEditAvatarPopup] = React.useState(false);\n  const [isEditProfile, setEditProfilePopup] = React.useState(false);\n  const [isDeleteCard, setDeleteCardPopup] = React.useState(false);\n  const [isImageExpand, setImageExpand] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({name: \"Yosemite\", link: \"https://code.s3.yandex.net/web-code/yosemite.jpg\"});\n  const [cards, setCards] = React.useState([]);\n\n\n  //handle click on buttons\n  function handleEditAvatarBtn() {\n    setEditAvatarPopup(true);\n  }\n  function handleEditProfileBtn() {\n    setEditProfilePopup(true);\n  }\n  function handleAddCardBtn() {\n    setAddNewCardPopup(true);\n  }\n  // function handleDeleteBtn(card) { // not needed yet\n  //   setDeleteCardPopup(true);\n  // }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setImageExpand(true);\n  }\n  function handleCardLike(card) {\n    // Check one more time if this card was already liked\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    const res = isLiked ? api.removeCardLike(card.id) : api.addCardLike(card.id);\n\n    res.then((newCard) => {\n      // Create a new array based on the existing one and putting a new card into it\n      const newCards = cards.map((c) => c.id === card.id ? transformCard(newCard) : c);\n      // Update the state\n      setCards(newCards);\n    }).catch(err => console.log(err));\n  }\n  function closeAllPopups() {\n    setEditAvatarPopup(false);\n    setEditProfilePopup(false);\n    setAddNewCardPopup(false);\n    setDeleteCardPopup(false);\n    setImageExpand(false);\n  }\n  // to be handled later\n  // function handleEscClose(evt) {\n  //   if(evt.key === 'Escape') {\n  //     closeAllPopups();\n  //   }\n  // }\n  function handlePopupClose(evt) {\n    if(evt.target !== evt.currentTarget) return;\n\n    closeAllPopups();\n  }\n  function handleCardDelete(card) {\n    api.removeCard(card.id)\n      .then(() => {\n        const cardsCopy = cards.filter((item) => item.id !== card.id);\n        setCards(cardsCopy);\n      })\n      .catch(err => console.log(err));\n  }\n\n  function handleEditAvatar(avatar) {\n    api.setUserAvatar({avatar})\n      .then((res) => { setCurrentUser(res) })\n      .then(() =>  setEditAvatarPopup(false))\n      .catch(err => console.log(err));\n  }\n\n  function handleEditProfile({name, about}) {\n    api.setUserInfos({name, about})\n      .then((user) => { setCurrentUser(user); })\n      .then(() =>  setEditProfilePopup(false))\n      .catch(err => console.log(err));\n  }\n\n  function transformCard(cardItem) {\n    return {\n      alt: cardItem.name,\n      title: cardItem.name,\n      src: cardItem.link,\n      id: cardItem._id,\n      owner: cardItem.owner,\n      likes: cardItem.likes\n    }\n  }\n\n  function handleAddNewCard({name, link}) {\n    api.addCard({name, link})\n      .then((newCard) => setCards([transformCard(newCard), ...cards]) )\n      .then(() => setAddNewCardPopup(false))\n      .catch(err => console.log(err));\n  }\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch(err => console.log(err));\n\n    api.getInitialCards()\n    .then((initialCards) => {\n      setCards(\n        initialCards.map(transformCard)\n      )\n    })\n    .catch(err => console.log(err));\n  }, [])\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header />\n      <Main\n        // send these state variables and their associated functions to main\n        cards={cards}\n        // popups button click\n        handleEditAvatarBtn={handleEditAvatarBtn}\n        handleEditProfileBtn={handleEditProfileBtn}\n        handleAddCardBtn={handleAddCardBtn}\n        // other buttons\n        handleCardLike={(card) => handleCardLike(card)}\n        handleCardDelete={(card) => handleCardDelete(card)}\n        // functionnalities\n        handleCardClick={(card) => handleCardClick(card)}\n        onCardClick={(card) => handleCardClick(card)}\n        onDeleteClick={(card) => handleCardDelete(card)}\n        onLickeClick={(card) => handleCardLike(card)}\n      />\n      <Footer />\n\n      {/* Edit avatar popup */}\n      <EditAvatarPopup isOpen={isEditAvatar} onClose={handlePopupClose} onUpdateAvatar={handleEditAvatar} />\n\n      {/* Edit Profile popup */}\n      <EditProfilePopup isOpen={isEditProfile} onClose={handlePopupClose} onProfileUpdate={handleEditProfile} />\n\n      {/* Add New Card Popup */}\n      <AddPlacePopup isOpen={isAddNewCard} onClose={handlePopupClose} handleAddNewCard={handleAddNewCard} />\n\n      {/* Delete card confirmation - not needed yet */}\n      <PopupWithForm name=\"delete\" title=\"Are You Sure?\" submitButton=\"Yes\" isOpen={isDeleteCard} onClose={handlePopupClose} onSubmit={handleCardDelete} />\n\n      {/* Expand card on full-screen */}\n      <ImagePopup src={selectedCard.src} title={selectedCard.title} isOpen={isImageExpand} onClose={handlePopupClose} />\n\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}