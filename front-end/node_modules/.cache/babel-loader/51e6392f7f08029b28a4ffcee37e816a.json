{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/emiline/Desktop/dev/around-react/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { CurrentUserContext } from '../contexts/currentUserContext';\nimport { defaultSettings, profileConfig, cardsConfig, popupConfig, avatarImage, avatarPicInput, avatarEditButton, descriptionInput, nameInput, submitAvatar, submitCard, submitEdit, projectId } from '../utils/constants';\nimport Api from './Api';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport AddCardPopup from './AddCardPopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport PopupWithForm from './PopupWithForm';\nimport PopupWithImage from './PopupWithImage';\n\nfunction App() {\n  _s();\n\n  const [currentUser, setCurrentUser] = React.useState({});\n  const api = new Api({\n    baseUrl: \"https://around.nomoreparties.co/v1/group-5\",\n    headers: {\n      authorization: projectId,\n      \"Content-Type\": \"application/json\"\n    }\n  }); //retrieve user profile infor from server\n\n  React.useEffect(() => {\n    api.getAppInfo().then(([userData, initialCards]) => {\n      //instance of section class\n      const defaultCardList = new Section({\n        item: initialCards,\n        renderer: addingCardToPage\n      }, cardsConfig.placesWrap); //render cards to the page\n\n      defaultCardList.rendererItems(); //click on add button to add cards to the page\n\n      const addCardModal = new PopupWithForm({\n        popupSelector: popupConfig.addCardFormModal,\n        handleFormSubmit: data => {\n          submitCard.textContent = \"Creating...\";\n          api.addCard(data).then(data => {\n            submitCard.textContent = \"Create\"; //instance of card\n\n            addingCardToPage(data);\n            addCardModal.close();\n          }).catch(err => console.log(err));\n        }\n      });\n      addCardModal.setEventListeners();\n      document.querySelector('.add-button').addEventListener('click', () => addCardModal.open());\n\n      function addingCardToPage(data) {\n        const card = new Card({\n          data,\n          handleCardClick: () => {\n            imageOpenModal.open(data.name, data.link);\n          },\n          handleDeleteClick: cardId => {\n            //open form to ask user's confirmation to delete card\n            deleteCardModal.open(cardId); //handle click on submit button\n\n            deleteCardModal.setSubmitHandler(() => {\n              //remove the card\n              api.removeCard(cardId).then(() => {\n                card.deleteCard();\n                deleteCardModal.close();\n              }).catch(err => console.log(err));\n            });\n          },\n          handleLikeClick: cardId => {\n            const isLiked = card._element.querySelector('.element__like').classList.contains('element__like_active');\n\n            if (isLiked) {\n              api.removeCardLike(cardId).then(res => {\n                card._element.querySelector('.element__like').classList.remove('element__like_active');\n\n                card.likesCount(res.likes.length);\n              }).catch(err => console.log(err));\n            } else {\n              api.addCardLike(cardId).then(res => {\n                card._element.querySelector('.element__like').classList.add('element__like_active');\n\n                return card.likesCount(res.likes.length);\n              }).catch(err => console.log(err));\n            }\n          }\n        }, userData._id, cardsConfig.cardSelector);\n        defaultCardList.addItem(card.getCardElements());\n      }\n\n      const profile = new UserInfo({\n        userNameSelector: profileConfig.profileName,\n        userDescriptionSelector: profileConfig.profileDescription,\n        userAvatarSelector: profileConfig.profileAvatar\n      }); //set user infos(name and job) on profile section on page launch\n\n      profile.setUserInfo({\n        userName: userData.name,\n        userDescription: userData.about,\n        userAvatar: userData.avatar\n      }); //edit-profile form\n\n      const editProfileModal = new PopupWithForm({\n        popupSelector: popupConfig.editFormModal,\n        handleFormSubmit: data => {\n          submitEdit.textContent = \"Saving...\";\n          api.setUserInfos({\n            name: data.name,\n            about: data.about\n          }).then(() => {\n            submitEdit.textContent = \"Save\";\n            profile.setUserInfo({\n              userName: data.name,\n              userDescription: data.about\n            });\n          }).then(() => {\n            editProfileModal.close();\n          }).catch(err => console.log(err));\n        }\n      }); // add listeners for edit-icon\n\n      document.querySelector('.profile__edit').addEventListener('click', () => {\n        editProfileModal.open();\n        const userInfos = profile.getUserInfo();\n        nameInput.value = userInfos.userName;\n        descriptionInput.value = userInfos.userDescription;\n      });\n      editProfileModal.setEventListeners(); //retrieve user avatar\n      // avatarImage.src = userData.avatar;\n    }).catch(err => console.log(err));\n  });\n\n  function handleDeleteCard(cardId) {}\n\n  function handleCardLike(cardId) {}\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"ia0l58pIwzCriyxaeyhKjUQd3Xo=\");\n\n_c = App;\nexport const popupEditProfile = document.querySelector('.popup_type_edit-profile');\nexport const popupAddCard = document.querySelector('.popup_type_add-card');\nexport const popupEditAvatar = document.querySelector('.popup_type_edit-avatar');\nconsole.log(popupAddCard);\nconsole.log(popupEditAvatar);\nconsole.log(popupEditProfile);\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/emiline/Desktop/dev/around-react/src/components/App.js"],"names":["React","CurrentUserContext","defaultSettings","profileConfig","cardsConfig","popupConfig","avatarImage","avatarPicInput","avatarEditButton","descriptionInput","nameInput","submitAvatar","submitCard","submitEdit","projectId","Api","Header","Main","Footer","AddCardPopup","EditAvatarPopup","EditProfilePopup","PopupWithForm","PopupWithImage","App","currentUser","setCurrentUser","useState","api","baseUrl","headers","authorization","useEffect","getAppInfo","then","userData","initialCards","defaultCardList","Section","item","renderer","addingCardToPage","placesWrap","rendererItems","addCardModal","popupSelector","addCardFormModal","handleFormSubmit","data","textContent","addCard","close","catch","err","console","log","setEventListeners","document","querySelector","addEventListener","open","card","Card","handleCardClick","imageOpenModal","name","link","handleDeleteClick","cardId","deleteCardModal","setSubmitHandler","removeCard","deleteCard","handleLikeClick","isLiked","_element","classList","contains","removeCardLike","res","remove","likesCount","likes","length","addCardLike","add","_id","cardSelector","addItem","getCardElements","profile","UserInfo","userNameSelector","profileName","userDescriptionSelector","profileDescription","userAvatarSelector","profileAvatar","setUserInfo","userName","userDescription","about","userAvatar","avatar","editProfileModal","editFormModal","setUserInfos","userInfos","getUserInfo","value","handleDeleteCard","handleCardLike","popupEditProfile","popupAddCard","popupEditAvatar"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { CurrentUserContext } from '../contexts/currentUserContext';\nimport { defaultSettings, profileConfig, cardsConfig, popupConfig, avatarImage, avatarPicInput, avatarEditButton,\n  descriptionInput, nameInput, submitAvatar, submitCard, submitEdit,projectId } from '../utils/constants';\nimport Api from './Api';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport AddCardPopup from './AddCardPopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport PopupWithForm from './PopupWithForm';\nimport PopupWithImage from './PopupWithImage';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({});\n  const api = new Api({\n    baseUrl: \"https://around.nomoreparties.co/v1/group-5\",\n    headers: {\n      authorization: projectId,\n      \"Content-Type\": \"application/json\"\n    }\n  });\n\n  //retrieve user profile infor from server\n  React.useEffect(() => {\n    api.getAppInfo()\n  .then(([userData, initialCards]) => {\n    //instance of section class\n    const defaultCardList = new Section({\n      item: initialCards,\n      renderer: addingCardToPage\n      },\n      cardsConfig.placesWrap\n    )\n    //render cards to the page\n    defaultCardList.rendererItems();\n\n    //click on add button to add cards to the page\n    const addCardModal = new PopupWithForm({\n      popupSelector: popupConfig.addCardFormModal,\n      handleFormSubmit: (data) => {\n        submitCard.textContent = \"Creating...\";\n        api.addCard(data)\n          .then(data => {\n            submitCard.textContent = \"Create\";\n            //instance of card\n            addingCardToPage(data);\n            addCardModal.close();\n          })\n          .catch(err => console.log(err))\n      }\n    });\n    addCardModal.setEventListeners();\n    document.querySelector('.add-button').addEventListener('click', () => addCardModal.open());\n\n    function addingCardToPage(data) {\n      const card = new Card({\n        data,\n        handleCardClick: () => {\n          imageOpenModal.open(data.name, data.link)\n        },\n        handleDeleteClick: (cardId) => {\n          //open form to ask user's confirmation to delete card\n          deleteCardModal.open(cardId);\n          //handle click on submit button\n          deleteCardModal.setSubmitHandler(() => {\n            //remove the card\n            api.removeCard(cardId)\n              .then(() => {\n                card.deleteCard();\n                deleteCardModal.close();\n              })\n              .catch(err => console.log(err));\n          });\n        },\n        handleLikeClick: (cardId) => {\n          const isLiked = card._element.querySelector('.element__like').classList.contains('element__like_active');\n          if(isLiked) {\n            api.removeCardLike(cardId)\n              .then(res => {\n                card._element.querySelector('.element__like').classList.remove('element__like_active');\n                card.likesCount(res.likes.length)\n              })\n              .catch(err => console.log(err))\n          } else {\n            api.addCardLike(cardId)\n              .then(res => {\n                card._element.querySelector('.element__like').classList.add('element__like_active');\n                return card.likesCount(res.likes.length)\n              })\n              .catch(err => console.log(err))\n          }\n        }\n      }, userData._id, cardsConfig.cardSelector);\n\n      defaultCardList.addItem(card.getCardElements());\n    }\n\n    const profile = new UserInfo({\n      userNameSelector: profileConfig.profileName,\n      userDescriptionSelector: profileConfig.profileDescription,\n      userAvatarSelector: profileConfig.profileAvatar\n    });\n    //set user infos(name and job) on profile section on page launch\n    profile.setUserInfo({\n      userName: userData.name,\n      userDescription: userData.about,\n      userAvatar: userData.avatar\n    });\n\n    //edit-profile form\n    const editProfileModal = new PopupWithForm({\n      popupSelector: popupConfig.editFormModal,\n      handleFormSubmit: (data) => {\n        submitEdit.textContent = \"Saving...\";\n        api.setUserInfos({\n          name: data.name,\n          about: data.about\n        })\n          .then(() => {\n            submitEdit.textContent = \"Save\";\n            profile.setUserInfo({\n              userName: data.name,\n              userDescription: data.about\n            });\n          })\n          .then(() => {\n            editProfileModal.close();\n          })\n          .catch(err => console.log(err))\n      }\n    });\n\n    // add listeners for edit-icon\n    document.querySelector('.profile__edit').addEventListener('click', () => {\n      editProfileModal.open();\n      const userInfos = profile.getUserInfo();\n      nameInput.value = userInfos.userName;\n      descriptionInput.value = userInfos.userDescription;\n    });\n    editProfileModal.setEventListeners();\n\n    //retrieve user avatar\n    // avatarImage.src = userData.avatar;\n  })\n  .catch(err => console.log(err));\n  })\n\n  function handleDeleteCard(cardId) {\n\n  }\n\n  function handleCardLike(cardId) {\n\n  }\n\n  return (\n    <div className=\"body\">\n    </div>\n  );\n}\nexport const popupEditProfile = document.querySelector('.popup_type_edit-profile');\nexport const popupAddCard = document.querySelector('.popup_type_add-card');\nexport const popupEditAvatar = document.querySelector('.popup_type_edit-avatar');\n\nconsole.log(popupAddCard);\nconsole.log(popupEditAvatar);\nconsole.log(popupEditProfile);\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}